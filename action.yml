# action.yml
name: 'sgrep-lint'
description: 'Run sgrep-lint with the given config and return the findings'
branding:
  icon: 'align-left'
  color: 'gray-dark'
icon: 'align-left'
inputs:
  error:
    description: 'action exits 1 if the findings are find thus breaking the build'
    required: false
    default: true
  config:
    description: 'config'
  targets:
    description: 'targets'
runs:
  using: 'docker'
  image: 'docker://returntocorp/sgrep:latest'
  args:
    - ${{ '--error' if inputs.error else ''}}
    - --config 
    - ${{ inputs.config }}
    - ${{ inputs.targets }}
